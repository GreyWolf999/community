<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" >
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>小新社区</title>
    <script src="/webjars/jquery/3.4.0/jquery.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <link rel="stylesheet" th:href="@{/webjars/layui/2.5.4/css/layui.css}">
    <link rel="stylesheet" th:href="@{/MyCss/profile.css}">
</head>
<body class="bodysd">
<!--   将相同的文件封装 然后在需要的地方直接插入-->
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <img alt="小新社区" src="/images/comunityIcon.jpg" style="width: 30px;padding-top: 8px;"><a class="navbar-brand labersty" href="/" style="float: right">小新社区</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <form class="navbar-form navbar-left">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Search">
                </div>
                <button type="submit" class="btn btn-default labersty">搜索</button>
            </form>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#" th:if="${session.user ==null}" id="login" class="labersty">登陆</a></li>
                <li><a href="#" th:if="${session.user == null}" id="register" class="labersty">注册</a></li>
                <li><a href="/publish" class="labersty">发出提问</a></li>
                <li class="dropdown" th:if="${session.user !=null}">
                    <img th:src="${session.user.getAvatarUrl()}" class="imaged">
                    <a href="#" class="dropdown-toggle labersty" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" th:text="${session.user.getName()}" style="float: right"></a><span class="caret"></span>
                    <ul class="dropdown-menu" th:if="${session.user !=null}" >
                        <li><a href="/community/profie" class="labersty">个人信息</a></li>
                        <li><a href="#" class="labersty">安全管理</a></li>
                        <li><a href="#" onclick="doLogout()" class="labersty">注销登陆</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="row navp" >
    <div class="heads">
    <div class="col-lg-9 col-md-12 col-sm-12 col-xs-12">
        <h1 class="fontfa"><span class="glyphicon glyphicon-user" aria-hidden="true" ></span>个人中心</h1>
        <hr>
        <div id="Central"></div>
        <!--流加载部分-->
<!--        <ul class="flow-default" id="dataliu"></ul>-->
</div>
    <div class="col-lg-3 col-md-12 col-sm-12 col-xs-12">
        <h1 class="fontfa">个人中心</h1>
        <div class="list-group labersty">
            <button type="button" class="list-group-item" onclick="personalCentral()" id="SelectedItem">个人资料</button>
            <button type="button" class="list-group-item" onclick="MyQuestions()" id="MyquestionsSelected">我的问题</button>
            <button type="button" class="list-group-item">Morbi leo risus</button>
            <button type="button" class="list-group-item">Porta ac consectetur ac</button>
            <button type="button" class="list-group-item">Vestibulum at eros</button>
        </div>
        <hr>
    </div>
    </div>
</div>
<script th:src="@{/webjars/layui/2.5.4/layui.js}"></script>
<script th:inline="javascript">

    function personalCentral(){
        // 利用jQuery修改按钮选中效果然后加载需要的页面信息
        $("#SelectedItem").attr("class","active list-group-item");
        $("#MyquestionsSelected").attr("class","list-group-item");
        $("#Central").load("/personalCentral");
    }
    function MyQuestions(){
        $("#MyquestionsSelected").attr("class","active list-group-item");
        $("#SelectedItem").attr("class","list-group-item");
        $("#Central").load("/goMyQuestion");
    }
    //注意：导航 依赖 element 模块，否则无法进行功能性操作
    layui.use('element', function(){
        var element = layui.element;
    });
    layui.use('layer', function(){
        var layer = layui.layer;
    });
    function updateUser() {
        var name=$("#PersonText").val();
        var password=$("#PasswordText").val();
        $.ajax({
            url:"/community/updateUser",
            type:"POST",
            sync:false,
            data:{
                name:name,
                password:password
            },
            success:function (data) {
                layer.msg(data,{
                    icon:1,
                    time:2000
                },function () {

                })
            }
        })
    }

// 注销
    function doLogout() {
        $.ajax({
            url:"/logout",
            type:"GET",
            sync:false,
            success:function (data) {
                layer.msg(data,{
                    icon: 1,
                    time: 2000
                }, function(){
                    parent.location.href="/"
                })
            }
        })
    }

</script>

</body>
</html>